(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{139:function(e,t,n){e.exports={ListTransaction:"ListTransactions_ListTransaction__2L6IU"}},144:function(e,t,n){e.exports={Main:"Main_Main__2uElM"}},145:function(e,t,n){e.exports={Config:"Config_Config__2dKE2"}},146:function(e,t,n){e.exports=n.p+"static/media/aCheckin-SC.6e48d838.png"},147:function(e,t,n){e.exports={Loading:"Loading_Loading__3sNNG"}},153:function(e,t,n){e.exports=n(321)},20:function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return r});var a=e.browser?window.require("os"):n(187),r=(e.browser?window.require("path"):n(188)).join(a.homedir(),".aCheckin","config.json");t.b=function(){try{return window.require(r)}catch(e){return null}}()}).call(this,n(46))},320:function(e,t,n){},321:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(129),o=n.n(c),i=n(23);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var l=n(14),s=n(5),u=n.n(s),m=n(134),f=n.n(m),d=n(82),h=n.n(d),E=n(135),v=n.n(E),g=Object(a.forwardRef)(function(e,t){var n=e.getSize,c=e.value,o=e.className,i=Object(a.useState)(),s=Object(l.a)(i,2),u=(s[0],s[1]);return Object(a.useImperativeHandle)(t,function(){return{redraw:function(){return u((new Date).getTime())}}}),r.a.createElement(v.a,{size:n(),value:c,className:o})}),b=n(323),p=n(328),O=n(324),w=n(327),j=n(325),N=n(326),_=n(329),k=n(136),S=n(38),T=n.n(S),y=n(24),C=n(60),x=n(37),I=n(137),q=n.n(I),$=n(20),A=n(18),F=n(19),R=n.n(F);function L(){var e=Object(A.a)(["\n  fragment AuthFragment on MachineInit {\n    id\n    name\n    access_token\n    refresh_token\n  }\n"]);return L=function(){return e},e}var M=R()(L());function D(){var e=Object(A.a)(["\n  mutation Init($id: String!, $machine_id: String!, $ts: Float!, $hash: String!) {\n    init(id: $id, machine_id: $machine_id, ts: $ts, hash: $hash) {\n      ...AuthFragment\n    }\n  }\n  ","\n"]);return D=function(){return e},e}var H=R()(D(),M),V=window.require("node-machine-id"),J=window.require("crypto"),K=function(e){throw e};function P(){var e=Object(A.a)(["\n  mutation RefreshToken($refresh_token: String!) {\n    renewToken(refresh_token: $refresh_token) {\n      ...AuthFragment\n    }\n  }\n  ","\n"]);return P=function(){return e},e}var W=R()(P(),M),z=function(e){throw e},B=n(61),G=n(138),Q=n.n(G);function U(){var e=Object(A.a)(["\n  fragment TransactionFragment on Transaction {\n    id\n    fee\n    total\n    date\n    status\n    products {\n      name\n      price\n      quantity\n    }\n    staff {\n      id\n      name\n      avatar\n    }\n  }\n"]);return U=function(){return e},e}var Y=R()(U());function X(){var e=Object(A.a)(["\n  query Transactions($offset: Float, $limit: Float) {\n    allTransaction(offset: $offset, limit: $limit) {\n      offset\n      limit\n      total\n      data {\n        ...TransactionFragment\n      }\n    }\n  }\n  ","\n"]);return X=function(){return e},e}var Z=R()(X(),Y),ee=n(139),te=n.n(ee),ne=function(e){var t=e.className,n=function(e){var t=e.offset,n=void 0===t?0:t,a=e.limit,r=e.onCompleted,c=void 0===r?function(){}:r,o=e.onError,l=void 0===o?function(){}:o,s=Object(x.a)(e,["offset","limit","onCompleted","onError"]),u=Object(i.useQuery)(Object(y.a)({query:Z,variables:{offset:n,limit:a},notifyOnNetworkStatusChange:!0,onCompleted:c,onError:l},s)),m=Object(B.get)(u.data,"allTransaction.total",0),f=Object(B.get)(u.data,"allTransaction.data",[]),d=f.length<m,h=Object(B.get)(u.data,"allTransaction",{});return Object(y.a)({},u,{data:h,hasMore:d,fetchMore:function(){u.fetchMore({variables:{offset:f.length},updateQuery:function(e,t){var n=t.fetchMoreResult;return n?Q()(e,{allTransaction:{total:{$set:n.allTransaction.total},data:{$push:n.allTransaction.data}}}):e}})}})}({offset:0,limit:20}).data;console.log(n);return r.a.createElement("div",{className:u()(te.a.ListTransaction,t)},r.a.createElement("div",{className:"header"},r.a.createElement("h4",null,"Danh s\xe1ch giao d\u1ecbch")),r.a.createElement(k.Scrollbars,{className:"scrollbar",style:{width:"100%",height:"100%"},noscrollx:"true"},r.a.createElement("div",{className:"p-3"},[1,2,3,4,5,6,7,8,9,10].map(function(){return r.a.createElement(p.a,{className:"shadow mb-3"},r.a.createElement(p.a.Body,null,r.a.createElement(p.a.Title,null,r.a.createElement(O.a,null,r.a.createElement("img",{className:"staff-avatar mr-3",src:"http://jeanbaptiste.bayle.free.fr/AVATAR/grey_81618-default-avatar-200x200.jpg",alt:"avatar"}),r.a.createElement(O.a.Body,{className:"align-self-center"},r.a.createElement("h5",{className:"mb-1"},"\u0110\u1eb7ng Ho\xe0ng Long"),"INIT"===(e="RECEIVED")||"WAITING"===e?r.a.createElement(b.a,{pill:!0,variant:"secondary"},"\u0110ang ch\u1edd"):"REFUNDED"===e?r.a.createElement(b.a,{pill:!0,variant:"danger"},"\u0110\xe3 ho\xe0n tr\u1ea3"):r.a.createElement(b.a,{pill:!0,variant:"primary"},"\u0110\xe3 ho\xe0n th\xe0nh")))),r.a.createElement(w.a,{variant:"flush"},[1,2,3].map(function(){return r.a.createElement(w.a.Item,null,r.a.createElement(j.a,null,r.a.createElement(N.a,{className:"d-flex"},r.a.createElement("div",{className:"product-name mr-1"},"asdasd"),r.a.createElement("div",null,"x1")),r.a.createElement(N.a,{className:"text-right"},"12312312VN\u0110")))}),r.a.createElement(w.a.Item,{variant:"secondary",className:"border-0"},r.a.createElement(j.a,null,r.a.createElement(N.a,null,"Ph\xed"),r.a.createElement(N.a,{className:"text-right"},"1312VN\u0110"))),r.a.createElement(w.a.Item,{variant:"secondary",className:"border-0"},r.a.createElement(j.a,null,r.a.createElement(N.a,null,r.a.createElement("h5",null,"T\u1ed4NG")),r.a.createElement(N.a,{className:"text-right"},r.a.createElement("h5",null,"12312312VN\u0110")))))),r.a.createElement(p.a.Footer,{className:"text-right"},r.a.createElement(_.a,null,"Ho\xe0n th\xe0nh")));var e}))))},ae=n(144),re=n.n(ae),ce=function(){var e=Object(a.useRef)(),t=Object(a.useRef)(),n=Object(a.useRef)();Object(a.useEffect)(function(){return h()(e.current,function(){t.current&&t.current.cancel(),t.current=f()(function(){return n.current.redraw()},200),t.current()}),function(){h.a.unbind(e.current),t.current&&t.current.cancel()}},[]);return r.a.createElement("div",{ref:e,className:u()(re.a.Main,"h-100 d-flex")},r.a.createElement("div",{className:"main"},r.a.createElement("div",{className:"text-center"},r.a.createElement("h1",{className:"mb-4 text-light"},"QR CODE"),r.a.createElement(g,{ref:n,getSize:function(){return document.documentElement.clientWidth/4>100?document.documentElement.clientWidth/4:100},value:"12313123123",className:"qrcode"}))),r.a.createElement("div",{className:"list-transaction"},r.a.createElement(ne,null)))},oe=n(21),ie=n(145),le=n.n(ie),se=n(146),ue=n.n(se),me=window.require("electron").remote,fe=me.app,de=me.dialog,he=window.require("fs"),Ee=oe.object().shape({ID:oe.string().required(),HOST_API:oe.string().required(),HOST_SOCKET:oe.string().required(),PATH_SOCKET:oe.string().required(),SECRET_KEY_MACHINE:oe.string().required(),EXTERNALS:oe.array(),DOOR:oe.number().required()}),ve=function(){return r.a.createElement("div",{className:le.a.Config},r.a.createElement("img",{className:"logo",src:ue.a,alt:"logo"}),r.a.createElement(_.a,{onClick:function(){de.showOpenDialog({title:"Ch\u1ecdn file c\u1ea5u h\xecnh",buttonLabel:"Ch\u1ecdn",filters:[{name:"JSON",extensions:["json"]}],properties:["openFile"]},function(e){var t=(e||[e])[0];if(t)if(he.existsSync(t)){var n=window.require(t);Ee.isValidSync(n)?(he.writeFileSync($.a,JSON.stringify(n)),fe.relaunch(),fe.quit(0)):alert("File config invalid")}else alert("File not found")})}},"Vui l\xf2ng ch\u1ecdn file c\u1ea5u h\xecnh"))},ge=n(147),be=n.n(ge),pe=function(){return r.a.createElement("div",{className:be.a.Loading},r.a.createElement("h1",{className:"text-light"},"Initializing..."))},Oe=window.require("node-schedule"),we=function(){var e=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.onCompleted,n=void 0===t?function(){}:t,r=e.onError,c=void 0===r?K:r,o=Object(x.a)(e,["onCompleted","onError"]),s=Object(a.useState)(!1),u=Object(l.a)(s,2),m=u[0],f=u[1],d=Object(a.useState)(null),h=Object(l.a)(d,2),E=h[0],v=h[1],g=Object(i.useClient)();return[function(){var e=Object(C.a)(T.a.mark(function e(){var t,a,r,i,l,s,u;return T.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,f(!0),t={id:$.b.ID,machine_id:V.machineIdSync(),ts:q()().valueOf()},a={},Object.keys(t).sort().forEach(function(e){a[e]=t[e]}),r=Object.keys(a).map(function(e){return a[e]}),i=J.createHash("sha256").update(r.join("")+$.b.SECRET_KEY_MACHINE).digest("hex"),e.next=9,g.mutate(Object(y.a)({mutation:H,variables:Object(y.a)({},t,{hash:i})},o));case 9:l=e.sent,s=l.access_token,u=l.refresh_token,localStorage.setItem("access_token",s),localStorage.setItem("refresh_token",u),n(),e.next=22;break;case 17:e.prev=17,e.t0=e.catch(0),console.error(e.t0),v(e.t0),c(e.t0);case 22:return e.prev=22,f(!1),e.finish(22);case 25:case"end":return e.stop()}},e,null,[[0,17,22,25]])}));return function(){return e.apply(this,arguments)}}(),{loading:m,error:E}]}(),t=Object(l.a)(e,2),n=t[0],c=t[1].loading,o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.onCompleted,n=void 0===t?function(){}:t,r=e.onError,c=void 0===r?z:r,o=Object(x.a)(e,["onCompleted","onError"]),s=Object(a.useState)(!1),u=Object(l.a)(s,2),m=u[0],f=u[1],d=Object(a.useState)(null),h=Object(l.a)(d,2),E=h[0],v=h[1],g=Object(i.useClient)();return[function(){var e=Object(C.a)(T.a.mark(function e(t){var a,r,i;return T.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,f(!0),e.next=4,g.mutate(Object(y.a)({mutation:W,variables:{refresh_token:t}},o));case 4:a=e.sent,r=a.access_token,i=a.refresh_token,localStorage.setItem("access_token",r),localStorage.setItem("refresh_token",i),n(),e.next=17;break;case 12:e.prev=12,e.t0=e.catch(0),console.error(e.t0),v(e.t0),c(e.t0);case 17:return e.prev=17,f(!1),e.finish(17);case 20:case"end":return e.stop()}},e,null,[[0,12,17,20]])}));return function(t){return e.apply(this,arguments)}}(),{loading:m,error:E}]}(),s=Object(l.a)(o,1)[0];return Object(a.useEffect)(function(){$.b&&(n(),Oe.scheduleJob("0 0 0 * * *",function(){var e=localStorage.getItem("refresh_token");e&&s(e)}))},[]),c?r.a.createElement(pe,null):$.b?r.a.createElement(ce,null):r.a.createElement(ve,null)},je=n(81),Ne=n(150),_e=n(149),ke=n(10),Se=n(148),Te=n.n(Se),ye=new je.ApolloClient({cache:new Ne.a,link:ke.ApolloLink.from([new Te.a(5e3),new _e.a({uri:function(){return $.b.HOST_API}})])});n(320);o.a.render(r.a.createElement(i.ApolloProvider,{client:ye},r.a.createElement(we,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[153,1,2]]]);
//# sourceMappingURL=main.0b566ea3.chunk.js.map